<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.petfound.backend.Mapper.PetMapper">
  <resultMap id="BaseResultMap" type="com.petfound.backend.Entity.Pet.Pet">
    <!--@mbg.generated-->
    <!--@Table pet-->
    <id column="petId" property="petId" />
    <result column="nickname" property="nickname" />
    <result column="sex" property="sex" />
    <result column="age" property="age" />
    <result column="breed" property="breed" />
    <result column="size" property="size" />
    <result column="color" property="color" />
    <result column="picture" property="picture" />
    <result column="feature" property="feature" />
    <result column="petIdNum" property="petIdNum" />
    <result column="weight" property="weight" />
    <result column="identity" property="identity" />
    <result column="isFound" property="isFound" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    petId, nickname, sex, age, breed, `size`, color, picture, feature, petIdNum, weight, 
    `identity`, isFound
  </sql>

<!--auto generated by MybatisCodeHelper on 2022-10-27-->
  <select id="selectByPetId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from pet
    where petId=#{petId}
  </select>

<!--auto generated by MybatisCodeHelper on 2022-10-27-->
  <insert id="insertSelective" useGeneratedKeys="true" keyProperty="petId">
    INSERT INTO pet
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="petId != null">
        petId,
      </if>
      <if test="nickname != null">
        nickname,
      </if>
      <if test="sex != null">
        sex,
      </if>
      <if test="age != null">
        age,
      </if>
      <if test="breed != null">
        breed,
      </if>
      <if test="size != null">
        size,
      </if>
      <if test="color != null">
        color,
      </if>
      <if test="picture != null">
        picture,
      </if>
      <if test="feature != null">
        feature,
      </if>
      <if test="petIdNum != null">
        petIdNum,
      </if>
      <if test="weight != null">
        weight,
      </if>
      <if test="identity != null">
        identity,
      </if>
      <if test="isFound != null">
        isFound
      </if>
    </trim>
    VALUES
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="petId != null">
        #{petId},
      </if>
      <if test="nickname != null">
        #{nickname},
      </if>
      <if test="sex != null">
        #{sex},
      </if>
      <if test="age != null">
        #{age},
      </if>
      <if test="breed != null">
        #{breed},
      </if>
      <if test="size != null">
        #{size},
      </if>
      <if test="color != null">
        #{color},
      </if>
      <if test="picture != null">
        #{picture},
      </if>
      <if test="feature != null">
        #{feature},
      </if>
      <if test="petIdNum != null">
        #{petIdNum},
      </if>
      <if test="weight != null">
        #{weight},
      </if>
      <if test="identity != null">
        #{identity},
      </if>
      <if test="isFound != null">
        #{isFound}
      </if>
    </trim>
  </insert>

<!--auto generated by MybatisCodeHelper on 2022-10-27-->
  <update id="updateByPetId">
    update pet
    <set>
      <if test="updated.petId != null">
        petId = #{updated.petId},
      </if>
      <if test="updated.nickname != null">
        nickname = #{updated.nickname},
      </if>
      <if test="updated.sex != null">
        sex = #{updated.sex},
      </if>
      <if test="updated.age != null">
        age = #{updated.age},
      </if>
      <if test="updated.breed != null">
        breed = #{updated.breed},
      </if>
      <if test="updated.size != null">
        size = #{updated.size},
      </if>
      <if test="updated.color != null">
        color = #{updated.color},
      </if>
      <if test="updated.picture != null">
        picture = #{updated.picture},
      </if>
      <if test="updated.feature != null">
        feature = #{updated.feature},
      </if>
      <if test="updated.petIdNum != null">
        petIdNum = #{updated.petIdNum},
      </if>
      <if test="updated.weight != null">
        weight = #{updated.weight},
      </if>
      <if test="updated.identity != null">
        identity = #{updated.identity},
      </if>
      <if test="updated.isFound != null">
        isFound = #{updated.isFound},
      </if>
    </set>
    where petId=#{petId}
  </update>

<!--auto generated by MybatisCodeHelper on 2022-10-27-->
  <delete id="deleteByPetId">
    delete from pet
    where petId=#{petId}
  </delete>
  
  <select id="selectPetByFilter" resultMap="BaseResultMap">
    SELECT *
    FROM pet
    WHERE
    (sex = '${petFilter.sex}' OR '${petFilter.sex}' = '') AND
    (breed = '${petFilter.breed}' OR '${petFilter.breed}' = '') AND
    (size = '${petFilter.size}' OR '${petFilter.size}' = '') AND
    (color = '${petFilter.color}' OR '${petFilter.color}' = '')
    <if test="petFilter.startAge != null and petFilter.endAge != null ">
      AND (age BETWEEN #{petFilter.startAge} AND #{petFilter.endAge})
    </if>
    <if test="petFilter.startWeight != null and petFilter.endWeight != null ">
      AND (weight BETWEEN #{petFilter.startWeight} AND #{petFilter.endWeight})
    </if>
    LIMIT #{startRow}, #{pageSize}
  </select>
  <select id="countPetByFilter" resultType="java.lang.Integer">
    SELECT count(petId)
    FROM pet
    WHERE
    (sex = '${petFilter.sex}' OR '${petFilter.sex}' = '') AND
    (breed = '${petFilter.breed}' OR '${petFilter.breed}' = '') AND
    (size = '${petFilter.size}' OR '${petFilter.size}' = '') AND
    (color = '${petFilter.color}' OR '${petFilter.color}' = '')
    <if test="petFilter.startAge != null and petFilter.endAge != null ">
      AND (age BETWEEN #{petFilter.startAge} AND #{petFilter.endAge})
    </if>
    <if test="petFilter.startWeight != null and petFilter.endWeight != null ">
      AND (weight BETWEEN #{petFilter.startWeight} AND #{petFilter.endWeight})
    </if>
  </select>
</mapper>