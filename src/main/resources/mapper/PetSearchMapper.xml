<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.petfound.backend.Mapper.PetSearchMapper">
  <resultMap id="BaseResultMap" type="com.petfound.backend.Entity.PetSearch.PetSearch">
    <!--@mbg.generated-->
    <!--@Table pet_search-->
    <id column="petSearchId" property="petSearchId" />
    <result column="petId" property="petId" />
    <result column="username" property="username" />
    <result column="countyId" property="countyId" />
    <result column="createTime" property="createTime" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    petSearchId, petId, username, countyId, createTime
  </sql>

<!--auto generated by MybatisCodeHelper on 2022-12-02-->
  <select id="countPetSearchId" resultType="java.lang.Integer">
    select count(petSearchId)
    from pet_search
  </select>

  <select id="countPetSearchIdByUsername" resultType="java.lang.Integer">
    select count(petSearchId)
    from pet_search
    where username = #{username}
  </select>

  <select id="countPetSearchIdByFilter" resultType="java.lang.Integer">
    SELECT count(petSearchId)
    FROM pet join pet_search ps on pet.petId = ps.petId
    WHERE
    (sex = '${petSearchFilter.sex}' OR '${petSearchFilter.sex}' = '') AND
    (breed = '${petSearchFilter.breed}' OR '${petSearchFilter.breed}' = '') AND
    (size = '${petSearchFilter.size}' OR '${petSearchFilter.size}' = '') AND
    (color = '${petSearchFilter.color}' OR '${petSearchFilter.color}' = '')
    <if test="petSearchFilter.countyId != null">
      AND countyId = #{petSearchFilter.countyId}
    </if>
    <if test="petSearchFilter.startAge != null and petSearchFilter.endAge != null ">
      AND (age BETWEEN #{petSearchFilter.startAge} AND #{petSearchFilter.endAge})
    </if>
    <if test="petSearchFilter.startWeight != null and petSearchFilter.endWeight != null ">
      AND (weight BETWEEN #{petSearchFilter.startWeight} AND #{petSearchFilter.endWeight})
    </if>
    <if test="petSearchFilter.startCreateTime != null and petSearchFilter.endCreateTime != null ">
      AND (createTime BETWEEN #{petSearchFilter.startCreateTime} AND #{petSearchFilter.endCreateTime})
    </if>
  </select>

  <select id="selectByPage" resultMap="BaseResultMap">
    SELECT *
    FROM pet_search
    LIMIT #{startRow}, #{pageSize}
  </select>

  <select id="selectByFilter" resultMap="BaseResultMap">
    SELECT ps.*
    FROM pet join pet_search ps on pet.petId = ps.petId
    WHERE
    (sex = '${petSearchFilter.sex}' OR '${petSearchFilter.sex}' = '') AND
    (breed = '${petSearchFilter.breed}' OR '${petSearchFilter.breed}' = '') AND
    (size = '${petSearchFilter.size}' OR '${petSearchFilter.size}' = '') AND
    (color = '${petSearchFilter.color}' OR '${petSearchFilter.color}' = '')
    <if test="petSearchFilter.countyId != null">
      AND countyId = #{petSearchFilter.countyId}
    </if>
    <if test="petSearchFilter.startAge != null and petSearchFilter.endAge != null ">
        AND (age BETWEEN #{petSearchFilter.startAge} AND #{petSearchFilter.endAge})
    </if>
    <if test="petSearchFilter.startWeight != null and petSearchFilter.endWeight != null ">
        AND (weight BETWEEN #{petSearchFilter.startWeight} AND #{petSearchFilter.endWeight})
    </if>
    <if test="petSearchFilter.startCreateTime != null and petSearchFilter.endCreateTime != null ">
        AND (createTime BETWEEN #{petSearchFilter.startCreateTime} AND #{petSearchFilter.endCreateTime})
    </if>
    LIMIT #{startRow}, #{pageSize}
  </select>

<!--auto generated by MybatisCodeHelper on 2022-12-06-->
  <insert id="insertSelective"  useGeneratedKeys="true" keyProperty="petSearchId">
    INSERT INTO pet_search
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="petSearchId != null">
        petSearchId,
      </if>
      <if test="petId != null">
        petId,
      </if>
      <if test="username != null">
        username,
      </if>
      <if test="countyId != null">
        countyId,
      </if>
      <if test="createTime != null">
        createTime
      </if>
    </trim>
    VALUES
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="petSearchId != null">
        #{petSearchId},
      </if>
      <if test="petId != null">
        #{petId},
      </if>
      <if test="username != null">
        #{username},
      </if>
      <if test="countyId != null">
        #{countyId},
      </if>
      <if test="createTime != null">
        #{createTime}
      </if>
    </trim>
  </insert>

<!--auto generated by MybatisCodeHelper on 2022-12-06-->
  <update id="updateByPetSearchId">
    update pet_search
    <set>
      <if test="updated.petSearchId != null">
        petSearchId = #{updated.petSearchId},
      </if>
      <if test="updated.petId != null">
        petId = #{updated.petId},
      </if>
      <if test="updated.username != null">
        username = #{updated.username},
      </if>
      <if test="updated.countyId != null">
        countyId = #{updated.countyId},
      </if>
      <if test="updated.createTime != null">
        createTime = #{updated.createTime},
      </if>
    </set>
    where petSearchId=#{petSearchId}
  </update>

<!--auto generated by MybatisCodeHelper on 2022-12-06-->
  <delete id="deleteByPetSearchId">
    delete from pet_search
    where petSearchId=#{petSearchId}
  </delete>

<!--auto generated by MybatisCodeHelper on 2022-12-06-->
  <select id="selectAllByPetSearchId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from pet_search
    where petSearchId=#{petSearchId}
  </select>

<!--auto generated by MybatisCodeHelper on 2022-12-06-->
  <select id="selectByUsername" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from pet_search
    where username=#{username}
    LIMIT #{startRow}, #{pageSize}
  </select>

<!--auto generated by MybatisCodeHelper on 2022-12-09-->
  <delete id="deleteByPetId">
    delete from pet_search
    where petId=#{petId}
  </delete>

<!--auto generated by MybatisCodeHelper on 2022-12-09-->
  <delete id="deleteByUsername">
    delete from pet_search
    where username=#{username}
  </delete>
</mapper>